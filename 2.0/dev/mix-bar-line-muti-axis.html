<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
	<link rel="stylesheet" charset="utf-8" href="http://g.tbcdn.cn/kissy/k/1.4.0/css/dpl/base-min.css">
    <script charset="utf-8" src="http://g.tbcdn.cn/kissy/k/1.4.0/seed-min.js"></script>
    <script type="text/javascript" src="../raphael/index.js"></script>
    <script type="text/javascript" src="../graph/index.js"></script>
    <script type="text/javascript" src="../base/index.js"></script>
    <script type="text/javascript" src="../base/util.js"></script>
    <script type="text/javascript" src="../adapter/kissy.js"></script>
    
    <!-- 坐标轴、网格支持 -->
    <script type="text/javascript" src="../w-axis/index.js"></script>
    <script type="text/javascript" src="../w-grid/index.js"></script>

    <!-- chart:bar、line -->
    <script type="text/javascript" src="../bar/index.js"></script>
    <script type="text/javascript" src="../line/index.js"></script>

    <title>bar和line的图表混搭：并且有多个坐标轴</title>
  </head>
  <body>
    <!-- note
    1. 现在只支持混搭 单向的bar 和 一条线图。多个bar怎么和 line混搭还没有想清楚
    2. 
    -->
    <div id="J_Canvas" style="width:700px;height:400px;border:1px solid #999;margin:20px 0 0 20px;">
    </div>
    <script>
     // 一、基础API
     // 1. 使用方式一，很自然的实现多种图表的混搭
     KISSY.use("gallery/kcharts/2.0/graph/index,gallery/kcharts/2.0/bar/index,gallery/kcharts/2.0/line/index,gallery/kcharts/2.0/w-axis/index",function(S,KCharts,Bar,Line,Axis){
       // 图表容器
       var chart = new KCharts({renderTo:"#J_Canvas"});       
       
       // 注意，现在只能定义x轴的文案
       // TODO, y轴的label文案应该提供自定义函数来支持
       var series = [
         {"data":[{"yval":2,"xtext":"st."}]},
         {"data":[{"yval":1}]},
         {"data":[{"yval":2}]},
         {"data":[{"yval":5}]},
         {"data":[{"yval":13}]},
         {"data":[{"yval":4}]}
       ];

       // 柱状图
       var bar = new Bar({
         series:series
       });
       chart.add(bar);
       
       // 线图
       var line = new Line({
         series:[0,2,3,4,6,2,3,10]
       });
       chart.add(line);
       
       //////////////////// 注意！ //////////////////// 
       // 多个图表混搭的时候，坐标轴可能有冲突 
       // 所以，这里的做法是，按照plug顺序，y从做到右，x从下到上四根坐标轴，占满了就不再绘制了
       // 但是实际上不能这么做：因为bar和line混搭的时候，业务场景一般是公用下方的x轴
       // 所以，这里先采用妥协的、需要手动配置的方案罢
       // plug时：手动指定x、y是否显示；以及，x、y的位置

       // widget axis：添加bar的
       var axis = new Axis({});
       bar.plug(axis);
       
       // widget axis：添加line的
       var axis = new Axis({
         isShowX:false, // 不再重复绘制x轴 
         yAlign:"right" // y轴标尺绘制在右边
       });
       line.plug(axis);
     });
    </script>
  </body>
</html>
